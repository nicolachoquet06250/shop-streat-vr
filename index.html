<!DOCTYPE html>
<html lang="en">
<!--<head>
    <meta charset="UTF-8">
    <title>Boutique générique VR</title>
    <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-system@1.4.0/dist/aframe-physics-system.js"></script>
    <script src="https://unpkg.com/super-hands@2.0.2/dist/super-hands.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.0.1/dist/aframe-extras.js"></script>
    <script src="https://unpkg.com/aframe-teleport-controls/dist/aframe-teleport-controls.js"></script>
</head>
<body>
    <a-scene physics="friction: 20; restitution: 20; debug: true">
        <a-assets>
            <a-asset-item id="cloud" src="/models/nuage.obj"></a-asset-item>
        </a-assets>

        &lt;!&ndash;
            position: x y z
            rotation: x y z
            width: largeur
            height: hauteur
            depth: profondeur
        &ndash;&gt;

        <a-box physics="friction: 20; restitution: 20" position="-49.5 3 -52" rotation="0 -90 0" width="2" height="6" static-body></a-box>
        <a-box physics="friction: 20; restitution: 20" position="-49 6 -53.5" width="2" height="12" depth="1" static-body></a-box>
        <a-box physics="friction: 20; restitution: 20" position="-47 3 -53.5" width="2" height="6" depth="1" static-body></a-box>
        <a-box physics="friction: 20; restitution: 20" position="-45 1 -53.5" width="2" height="2" depth="1" static-body></a-box>
        <a-box physics="friction: 20; restitution: 20" position="-43 1.5 -53.5" width="2" height="3" depth="1" static-body></a-box>
        <a-box physics="friction: 20; restitution: 20" position="-39 3 -53.5" width="6" height="6" depth="1" static-body></a-box>

        <a-light type="ambient" color="#445451"></a-light>
        <a-light type="point" intensity="2" position="2 4 4"></a-light>

        <a-entity obj-model="obj: #cloud" position="-50 10 -50" scale="20 0 10" color="white"></a-entity>
        <a-entity environment="shadow: true; shadowSize: 10;" ></a-entity>

        <a-sky color="skyblue"></a-sky>

        <a-entity>
            <a-camera universal-controls kinematic-body>
                <a-entity geometry="primitive: plane; height: 0.2; width: 0.2" position="0 0 -1" material="color: gray; opacity: 0.5"></a-entity>
            </a-camera>
        </a-entity>
&lt;!&ndash;        <a-entity daydream-controls="hand: left"></a-entity>&ndash;&gt;
&lt;!&ndash;        <a-entity daydream-controls="hand: right"></a-entity>&ndash;&gt;

&lt;!&ndash;        <a-entity gearvr-controls="hand: left"></a-entity>&ndash;&gt;
&lt;!&ndash;        <a-entity gearvr-controls="hand: right"></a-entity>&ndash;&gt;

&lt;!&ndash;        <a-entity oculus-go-controls="hand: left"></a-entity>&ndash;&gt;
&lt;!&ndash;        <a-entity oculus-go-controls="hand: right"></a-entity>&ndash;&gt;

&lt;!&ndash;        <a-entity oculus-touch-controls="hand: left"></a-entity>&ndash;&gt;
&lt;!&ndash;        <a-entity oculus-touch-controls="hand: right"></a-entity>&ndash;&gt;

&lt;!&ndash;        <a-entity vive-controls="hand: left"></a-entity>&ndash;&gt;
&lt;!&ndash;        <a-entity vive-controls="hand: right"></a-entity>&ndash;&gt;

&lt;!&ndash;        <a-entity vive-focus-controls="hand: left"></a-entity>&ndash;&gt;
&lt;!&ndash;        <a-entity vive-focus-controls="hand: right"></a-entity>&ndash;&gt;

&lt;!&ndash;        <a-entity windows-motion-controls="hand: left"></a-entity>&ndash;&gt;
&lt;!&ndash;        <a-entity windows-motion-controls="hand: right"></a-entity>&ndash;&gt;

        <a-entity id="left-hand" brush paint-controls="hand: left" ui teleport-controls></a-entity>
        <a-entity id="right-hand" brush paint-controls="hand: right" ui teleport-controls></a-entity>
    </a-scene>
</body>-->

<head>
    <meta charset="utf-8" />
    <title>My A-Frame Scene</title>
    <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-teleport-controls/dist/aframe-teleport-controls.js"></script>
    <script>
	    /* global AFRAME */
	    AFRAME.registerShader('skyGradient', {
		    schema: {
			    colorTop: { type: 'color', default: 'black', is: 'uniform' },
			    colorBottom: { type: 'color', default: 'red', is: 'uniform' }
		    },

		    vertexShader: [
			    'varying vec3 vWorldPosition;',

			    'void main() {',

			    'vec4 worldPosition = modelMatrix * vec4( position, 1.0 );',
			    'vWorldPosition = worldPosition.xyz;',

			    'gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',

			    '}'

		    ].join('\n'),

		    fragmentShader: [
			    'uniform vec3 colorTop;',
			    'uniform vec3 colorBottom;',

			    'varying vec3 vWorldPosition;',

			    'void main()',

			    '{',
			    'vec3 pointOnSphere = normalize(vWorldPosition.xyz);',
			    'float f = 1.0;',
			    'if(pointOnSphere.y > - 0.2){',

			    'f = sin(pointOnSphere.y * 2.0);',

			    '}',
			    'gl_FragColor = vec4(mix(colorBottom,colorTop, f ), 1.0);',

			    '}'
		    ].join('\n')
	    });
    </script>
    <script src="https://unpkg.com/aframe-input-mapping-component/dist/aframe-input-mapping-component.min.js"></script>
    <script>
	    var mappings = {
		    mappings: {
			    default: {
				    common: {
					    trackpaddown: 'teleportstart',
					    trackpadup: 'teleportend'
				    },
				    'oculus-touch-controls': {
					    thumbstickdown: 'teleportstart',
					    thumbstickup: 'teleportend'
				    },
				    keyboard: {
					    't_down': 'teleportstart',
					    't_up': 'teleportend'
				    }
			    }
		    }
	    };

	    AFRAME.registerInputMappings(mappings);
    </script>
</head>

<body>
    <a-scene>
        <!-- lights -->
        <a-entity position="-1 4 0" light="color: #f4f4f4; intensity: 0.6; type: point"></a-entity>
        <a-entity position="10 3 3" light="color: #47c9ff; intensity: 0.3; type: hemisphere"></a-entity>
        <!-- scene geometry -->
        <a-entity id="sky"
                  geometry="primitive: sphere; radius: 65;"
                  material="shader: skyGradient; colorTop: #353449; colorBottom: #BC483E; side: back"></a-entity>
        <a-entity id="floor"
                  rotation="-90 0 0"
                  position="0 -5 0"
                  geometry="primitive: plane; width: 100; height: 100"
                  material="src: url(../common/pavement.jpg); repeat: 40 40">
        </a-entity>
        <a-entity
                geometry="primitive: sphere; radius: 1;"
                position= "-5 0 -5"
                material="color: #f00">
        </a-entity>
        <a-entity
                geometry="primitive: box; width: 6; height: 1.5"
                position= "-3 0 6"
                material="color: #ff0">
        </a-entity>
        <a-entity
                geometry="primitive: box; width: 1.5; height: 1.5; depth: 1.5"
                position= "6.5 0 5";
                material="color: #00f">
        </a-entity>
        <a-entity id="floorgeometry" position="0 0.15 0"
                  material="src: url(asphalt.jpg); repeat: 10 10; roughness: 0.8" obj-model="obj: url(floor.obj)">
        </a-entity>

        <a-entity id="cameraRig">
            <a-entity camera wasd-controls look-controls></a-entity>
            <!-- hand controls -->
            <a-entity id="left-hand"
                      teleport-controls="collisionEntities: #floorgeometry; cameraRig: #cameraRig; startEvents: teleportstart; endEvents: teleportend"
                      vive-controls="hand: left"
                      oculus-touch-controls="hand: left"
                      microsoft-motion-controls="hand: left"
                      daydream-controls="left" gearvr-controls="left">
            </a-entity>
            <a-entity id="right-hand"
                      teleport-controls="collisionEntities: #floorgeometry; cameraRig: #cameraRig; startEvents: teleportstart; endEvents: teleportend"
                      vive-controls="hand: right"
                      microsoft-motion-controls="hand: right"
                      oculus-touch-controls="hand: right"
                      daydream-controls="right" gearvr-controls="right">
            </a-entity>
        </a-entity>
    </a-scene>
</body>
</html>
